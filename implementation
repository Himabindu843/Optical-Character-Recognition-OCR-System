!pip install pytesseract opencv-python numpy matplotlib
import cv2
import pytesseract
import numpy as np
import matplotlib.pyplot as plt
from google.colab import files
uploaded = files.upload()
image = cv2.imread(list(uploaded.keys())[0])

# Convert BGR to RGB for display
image_rgb = cv2.cvtColor(image, cv2.COLOR_BGR2RGB)

plt.figure(figsize=(6,6))
plt.imshow(image_rgb)
plt.axis('off')
plt.title("Original Image")
plt.show()
gray = cv2.cvtColor(image, cv2.COLOR_BGR2GRAY)

plt.figure(figsize=(6,6))
plt.imshow(gray, cmap='gray')
plt.axis('off')
plt.title("Grayscale Image")
plt.show()
denoised = cv2.GaussianBlur(gray, (5,5), 0)

plt.figure(figsize=(6,6))
plt.imshow(denoised, cmap='gray')
plt.axis('off')
plt.title("Denoised Image")
plt.show()
_, thresh = cv2.threshold(
    denoised, 0, 255,
    cv2.THRESH_BINARY + cv2.THRESH_OTSU
)

plt.figure(figsize=(6,6))
plt.imshow(thresh, cmap='gray')
plt.axis('off')
plt.title("Thresholded Image")
plt.show()
custom_config = r'--oem 3 --psm 6'
extracted_text = pytesseract.image_to_string(thresh, config=custom_config)

print("Extracted Text:")
print(extracted_text)
with open("extracted_text.txt", "w") as file:
    file.write(extracted_text)

print("Text saved to extracted_text.txt")
files.download("extracted_text.txt")
